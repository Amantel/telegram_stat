<html>

<head>
    <meta charset="UTF-8">

    <script type="text/javascript" src="2017_06_02T20_35_55_telegramContest.js"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { packages: ['corechart', 'bar'] });
        google.charts.setOnLoadCallback(drawBasic);

        //theInfo; 
        //1. Group by candidates
        var candidatesGroupName = [];
        theInfo.forEach((templateEl, i) => {
            templateEl.candidates.forEach((candidate, i) => {
                if (!candidatesGroupName[candidate.nickName])
                    candidatesGroupName[candidate.nickName] = [];

                candidatesGroupName[candidate.nickName].push(candidate);
            });
        });

        var candidatesGroupNameViz = [];

        for (var key in candidatesGroupName) {
            let value = candidatesGroupName[key];
            candidatesGroupNameViz.push([key, value.length, value.length]);
        }



        function drawBasic() {

            var futureData = [
                ['Name', 'Candidate Templates', { role: 'annotation' }],
            ].concat(candidatesGroupNameViz);




            var data = google.visualization.arrayToDataTable(futureData);


            var options = {
                title: 'Templates',
                chartArea: { width: '50%', height: "100%" },
                hAxis: {
                    title: 'Templates Number',
                    minValue: 0
                },
                vAxis: {
                    title: 'Name'
                },
                legend: { position: 'none' },
                vAxis: { textStyle: { color: '#005500', fontSize: '12', paddingRight: '100', marginRight: '100' } },
                hAxis: { textStyle: { color: '#005500', fontSize: '11', paddingRight: '100', marginRight: '100' } },
                bars: 'horizontal',
                axes: {
                    x: {
                        0: { side: 'top' }
                    }
                },
                annotations: {
                    textStyle: {
                        fontSize: 14,
                        opacity: 0.8
                    }
                }


            };




            var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
            //https://stackoverflow.com/questions/15443931/sorting-data-on-x-axis-in-google-line-chart
            data.sort([{ column: 1, desc: true }]);
            chart.draw(data, options);
        }
    </script>
</head>

<body>
    <div id="chart_div" style="width: 100%; height: 13000px;"></div>
</body>

</html>